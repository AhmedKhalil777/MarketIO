import getBasePlacement from"../utils/getBasePlacement.js";import getLayoutRect from"../dom-utils/getLayoutRect.js";import contains from"../dom-utils/contains.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getMainAxisFromPlacement from"../utils/getMainAxisFromPlacement.js";import within from"../utils/within.js";import mergePaddingObject from"../utils/mergePaddingObject.js";import expandToHashMap from"../utils/expandToHashMap.js";import{left,right,basePlacements,top,bottom}from"../enums.js";function arrow(e){var t,r=e.state,a=e.name,i=r.elements.arrow,s=r.modifiersData.popperOffsets,o=getBasePlacement(r.placement),n=getMainAxisFromPlacement(o),m=[left,right].indexOf(o)>=0?"height":"width";if(i&&s){var f=r.modifiersData[a+"#persistent"].padding,p=getLayoutRect(i),l="y"===n?top:left,c="y"===n?bottom:right,d=r.rects.reference[m]+r.rects.reference[n]-s[n]-r.rects.popper[m],g=s[n]-r.rects.reference[n],u=r.elements.arrow&&getOffsetParent(r.elements.arrow),h=u?"y"===n?u.clientHeight||0:u.clientWidth||0:0,P=d/2-g/2,w=f[l],j=h-p[m]-f[c],O=h/2-p[m]/2+P,b=within(w,O,j),x=n;r.modifiersData[a]=((t={})[x]=b,t.centerOffset=b-O,t)}}function effect(e){var t=e.state,r=e.options,a=e.name,i=r.element,s=void 0===i?"[data-popper-arrow]":i,o=r.padding,n=void 0===o?0:o;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&contains(t.elements.popper,s)&&(t.elements.arrow=s,t.modifiersData[a+"#persistent"]={padding:mergePaddingObject("number"!=typeof n?n:expandToHashMap(n,basePlacements))})}export default{name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};